!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1),n(2)},function(e,t){"use strict";"function"!=typeof Object.create&&(Object.create=function(){var e=function(){};return function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(t!==Object(t)&&null!==t)throw new TypeError("Argument must be an object or null");if(null===t)throw Error("null [[Prototype]] not supported");e.prototype=t;var n=new e;return e.prototype=null,n}}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(3),i=r(a),s=n(4),u=r(s),o=n(6),c=r(o);!function(){var e={};window.PubNubAngular=ng.core.Class({constructor:function(){if("undefined"==typeof PubNub||null===PubNub)throw new Error("PubNub is not in global scope. Ensure that pubnub.js v4 library is included before the angular adapter");this.broadcastOn=new c.default},init:function(e){var t=this.getInstance(i.default.default_instance_name);return t.init(e),t},getInstance:function(t){var n=this,r=e[t];return r&&r instanceof u.default?r:"string"==typeof t&&t.length>0?(e[t]=new u.default(t,this),i.default.attributes_to_delegate.forEach(function(r){e[t].wrapAttribute(r),n[r]||Object.defineProperty(n,r,{get:function(){return this.getInstance(i.default.default_instance_name)[r]}})}),i.default.methods_to_delegate.forEach(function(r){e[t].wrapMethod(r),n[r]||(n[r]=function(e){return this.getInstance(i.default.default_instance_name)[r](e)})}),e[t]):r},subscribe:function(e){this.getInstance(i.default.default_instance_name).subscribe(e)},unsubscribe:function(e){this.getInstance(i.default.default_instance_name).unsubscribe(e)}})}()},function(e,t){e.exports={pubnub_prefix:"pubnub",default_instance_name:"default",attributes_to_delegate:["channelGroups","push"],methods_to_delegate:["addListener","removeListener","removeAllListeners","hereNow","whereNow","getState","setState","grant","audit","publish","fire","history","time","reconnect","stop","unsubscribeAll","getSubscribedChannels","getSubscribedChannelGroups","encrypt","decrypt","getAuthKey","setAuthKey","setCipherKey","getUUID","setUUID","getFilterExpression","setFilterExpression"],common_callbacks_to_wrap:["callback","error"],subscribe_listener_events_to_broadcast:["message","presence","status"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),u=r(s);e.exports=function(){function e(t,n){a(this,e),this.label=t,this.pubnubInstance=null,this.mockingInstance=new u.default(n)}return i(e,[{key:"init",value:function(e){this.pubnubInstance=new PubNub(e),this.mockingInstance.initializeListener(this)}},{key:"getLabel",value:function(){return this.label}},{key:"subscribe",value:function(e){this.getOriginalInstance().subscribe(e),this.mockingInstance.enableEventsBroadcast(e)}},{key:"unsubscribe",value:function(e){this.getOriginalInstance().unsubscribe(e),this.mockingInstance.disableEventsBroadcast(e)}},{key:"getOriginalInstance",value:function(){if(this.pubnubInstance)return this.pubnubInstance;throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.")}},{key:"wrapAttribute",value:function(e){Object.defineProperty(this,e,{get:function(){return this.getOriginalInstance()[e]}})}},{key:"wrapMethod",value:function(e){this[e]=function(t){return this.getOriginalInstance()[e](t)}}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),u=r(s);e.exports=function(){function e(t){a(this,e),this.listener=null,this.service=t,this.broadcastChannels={}}return i(e,[{key:"initializeListener",value:function(e){var t=this;null===this.listener&&!function(){var n=t;n.listener={},u.default.subscribe_listener_events_to_broadcast.forEach(function(e){n.listener[e]=function(t){t.channel&&n.broadcastChannels[t.channel]&&n.broadcastChannels[t.channel].includes(e)?n.service.broadcastOn.emit(e,t.channel,t):"status"===e&&t.affectedChannels.forEach(function(r){n.broadcastChannels[r]&&n.broadcastChannels[r].includes(e)&&n.service.broadcastOn.emit(e,r,t)})}}),e.getOriginalInstance().addListener(t.listener)}()}},{key:"enableEventsBroadcast",value:function(e){var t=this;e.channels.forEach(function(n){"boolean"==typeof e.triggerEvents?t.broadcastChannels[n]=u.default.subscribe_listener_events_to_broadcast:Array.isArray(e.triggerEvents)&&(t.broadcastChannels[n]=[],e.triggerEvents.forEach(function(e){u.default.subscribe_listener_events_to_broadcast.includes(e)&&t.broadcastChannels[n].push(e)}))})}},{key:"disableEventsBroadcast",value:function(e){var t=this;e.channels.forEach(function(e){t.broadcastChannels[e]&&delete t.broadcastChannels[e]})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){Array.isArray(t)?t.forEach(function(t){e[t]=n}):e[t]=n}function s(e,t){Array.isArray(t)?t.forEach(function(t){e[t]&&delete e[t]}):e[t]&&delete e[t]}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),c=r(o);e.exports=function(){function e(){var t=this;a(this,e),c.default.subscribe_listener_events_to_broadcast.forEach(function(e){var n="_".concat(e);t[n]={},t[e]=function(e,t){i(this[n],e,t)}})}return u(e,[{key:"emit",value:function(e,t,n){var r="_".concat(e);this[r]&&this[r][t]&&this[r][t].call(null,n)}},{key:"unsubscribe",value:function(e){var t=this;c.default.subscribe_listener_events_to_broadcast.forEach(function(n){var r="_".concat(n);s(t[r],e)})}}]),e}()}]);