!function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";t(1),t(2)},function(e,n){"use strict";"function"!=typeof Object.create&&(Object.create=function(){var e=function(){};return function(n){if(arguments.length>1)throw new Error("Second argument not supported");if(n!==Object(n)&&null!==n)throw new TypeError("Argument must be an object or null");if(null===n)throw Error("null [[Prototype]] not supported");e.prototype=n;var t=new e;return e.prototype=null,t}}())},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=t(3),s=r(a),i=t(4),u=r(i),o=t(6),c=r(o);!function(){window.PubNubAngular=ng.core.Class({constructor:function(){if("undefined"==typeof PubNub||null===PubNub)throw new Error("PubNub is not in global scope. Ensure that pubnub.js v4 library is included before the angular adapter");this.wrappers={},this.broadcastOn=new c.default},init:function(e){var n=this.getInstance(s.default.default_instance_name);return n.init(e),n},getInstance:function(e){var n=this,t=this.wrappers[e];return t&&t instanceof u.default?t:"string"==typeof e&&e.length>0?(this.wrappers[e]=new u.default(e,this),s.default.attributes_to_delegate.forEach(function(t){n.wrappers[e].wrapAttribute(t),n[t]||Object.defineProperty(n,t,{get:function(){return this.getInstance(s.default.default_instance_name)[t]}})}),s.default.methods_to_delegate.forEach(function(t){n.wrappers[e].wrapMethod(t),n[t]||(n[t]=function(e){return this.getInstance(s.default.default_instance_name)[t](e)})}),this.wrappers[e]):t},subscribe:function(e){this.getInstance(s.default.default_instance_name).subscribe(e)},unsubscribe:function(e){this.getInstance(s.default.default_instance_name).unsubscribe(e)}})}()},function(e,n){e.exports={pubnub_prefix:"pubnub",default_instance_name:"default",attributes_to_delegate:["channelGroups","push"],methods_to_delegate:["addListener","removeListener","removeAllListeners","hereNow","whereNow","getState","setState","grant","audit","publish","fire","history","time","reconnect","stop","unsubscribeAll","getSubscribedChannels","getSubscribedChannelGroups","encrypt","decrypt","getAuthKey","setAuthKey","setCipherKey","getUUID","setUUID","getFilterExpression","setFilterExpression"],common_callbacks_to_wrap:["callback","error"],subscribe_listener_events_to_broadcast:["message","presence","status"]}},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=t(5),u=r(i);e.exports=function(){function e(n,t){a(this,e),this.label=n,this.pubnubInstance=null,this.mockingInstance=new u.default(t)}return s(e,[{key:"init",value:function(e){this.pubnubInstance=new PubNub(e),this.mockingInstance.initializeListener(this)}},{key:"getLabel",value:function(){return this.label}},{key:"subscribe",value:function(e){this.getOriginalInstance().subscribe(e),this.mockingInstance.enableEventsBroadcast(e)}},{key:"unsubscribe",value:function(e){this.getOriginalInstance().unsubscribe(e),this.mockingInstance.disableEventsBroadcast(e)}},{key:"getOriginalInstance",value:function(){if(this.pubnubInstance)return this.pubnubInstance;throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.")}},{key:"wrapAttribute",value:function(e){Object.defineProperty(this,e,{get:function(){return this.getOriginalInstance()[e]}})}},{key:"wrapMethod",value:function(e){this[e]=function(n){return this.getOriginalInstance()[e](n)}}}]),e}()},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=t(3),u=r(i);e.exports=function(){function e(n){a(this,e),this.listener=null,this.service=n,this.broadcastChannels={}}return s(e,[{key:"initializeListener",value:function(e){var n=this;null===this.listener&&!function(){var t=n;t.listener={},u.default.subscribe_listener_events_to_broadcast.forEach(function(e){t.listener[e]=function(n){n.subscription&&t.broadcastChannels[n.subscription]&&t.broadcastChannels[n.subscription].includes(e)&&(t.service.broadcastOn.emit(e,n.subscription,n),n.channel&&t.service.broadcastOn.emit(e,n.channel,n)),n.channel&&t.broadcastChannels[n.channel]&&t.broadcastChannels[n.channel].includes(e)&&t.service.broadcastOn.emit(e,n.channel,n),"status"===e&&(n.error?t.service.broadcastOn.emitError(n):(n.affectedChannels.forEach(function(r){t.broadcastChannels[r]&&t.broadcastChannels[r].includes(e)&&t.service.broadcastOn.emit(e,r,n)}),n.affectedChannelGroups.forEach(function(r){t.broadcastChannels[r]&&t.broadcastChannels[r].includes(e)&&t.service.broadcastOn.emit(e,r,n)})))}}),e.getOriginalInstance().addListener(n.listener)}()}},{key:"addEventsBroadcast",value:function(e,n){var t=this;e.forEach(function(e){"boolean"==typeof n?t.broadcastChannels[e]=u.default.subscribe_listener_events_to_broadcast:Array.isArray(n)&&(t.broadcastChannels[e]=[],n.forEach(function(n){u.default.subscribe_listener_events_to_broadcast.includes(n)&&t.broadcastChannels[e].push(n)}))})}},{key:"removeEventBroadcast",value:function(e){var n=this;e.forEach(function(e){n.broadcastChannels[e]&&delete n.broadcastChannels[e]})}},{key:"enableEventsBroadcast",value:function(e){e.channels&&this.addEventsBroadcast(e.channels,e.triggerEvents),e.channelGroups&&this.addEventsBroadcast(e.channelGroups,e.triggerEvents)}},{key:"disableEventsBroadcast",value:function(e){e.channels&&this.removeEventBroadcast(e.channels),e.channelGroups&&this.removeEventBroadcast(e.channelGroups)}}]),e}()},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n,t){Array.isArray(n)?n.forEach(function(n){e[n]=t}):e[n]=t}function i(e,n){Array.isArray(n)?n.forEach(function(n){e[n]&&delete e[n]}):e[n]&&delete e[n]}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t(3),c=r(o);e.exports=function(){function e(){var n=this;a(this,e),c.default.subscribe_listener_events_to_broadcast.forEach(function(e){var t="_".concat(e);n[t]={},n[e]=function(e,n){s(this[t],e,n)}})}return u(e,[{key:"emit",value:function(e,n,t){var r="_".concat(e);this[r]&&this[r][n]&&this[r][n].call(null,t)}},{key:"error",value:function(e){this._error=e}},{key:"emitError",value:function(e){this._error&&this._error.call(null,e)}},{key:"unsubscribe",value:function(e){var n=this;c.default.subscribe_listener_events_to_broadcast.forEach(function(t){var r="_".concat(t);i(n[r],e)})}}]),e}()}]);